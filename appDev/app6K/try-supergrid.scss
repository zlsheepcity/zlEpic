$colorShy: rgba(0,0,0,0.05);
$Wdim: 1.0rem;
$Hdim: 0.9rem;



html {
    font-family: Vollkorn;
}
* {
    margin: 0;
    padding: 0;
}
p {
    background-color: $colorShy;
}

$grid-formula--size-overmain: 0;

$grid-formula--part-midpoint:
    1fr unquote(" [b] ")
    1fr unquote(" [c] ")
    1fr unquote(" [d midpoint] ")
    1fr unquote(" [e] ")
    1fr unquote(" [f] ")
    1fr ;

$grid-template-columns--main:
    unquote(" [overmain-start full-start main-start menu-start aside-start a] ")
            $grid-formula--part-midpoint
    unquote(" [overmain-end full-end main-end menu-end aside-end g] ")
    ;

$grid-template-columns--full:
    unquote(" [full-start] ")
            1fr
        unquote(" [menu-start] ")
            16vw
        unquote(" [menu-end overmain-start] ")
                $grid-formula--size-overmain
            unquote(" [main-start a] ")
                $grid-formula--part-midpoint
            unquote(" [main-end g] ")
                $grid-formula--size-overmain
        unquote(" [overmain-end aside-start] ")
            16vw
        unquote(" [aside-end] ")
            1fr
    unquote(" [full-end] ")
    ;

$grid-template-columns--overmain:
    unquote(" [overmain-start full-start] ")
            $grid-formula--size-overmain
        unquote(" [main-start menu-start aside-start a] ")
            $grid-formula--part-midpoint
        unquote(" [main-end menu-end aside-end g] ")
            $grid-formula--size-overmain
    unquote(" [overmain-end full-end] ")
    ;

%grid-setup {
    display:        grid;
    align-items:    start;
    grid-auto-flow: row;
    grid-auto-rows: min-content;
    grid-gap:       1*$Hdim 1*$Wdim;
}

%grid-template--main {
    grid-template-columns: $grid-template-columns--main;
}
%grid-template--full {
    grid-template-columns: $grid-template-columns--full;
}
%grid-template--overmain {
    grid-template-columns: $grid-template-columns--overmain;
}

.grid {
    @extend %grid-setup;
    @extend %grid-template--full;
    grid-column: full;
    * { grid-column: main; }
}
.grid-chapter {
    @extend .grid;
    padding-top:    1*$Hdim;
    padding-bottom: 1*$Hdim;
}
.grid-layer {
    @extend %grid-setup;
    @extend %grid-template--full;
    grid-column: full;
}
.grid-overmain {
    grid-column: overmain;
    @extend %grid-setup;
    @extend %grid-template--overmain;
}




[chapter]           { @extend .grid-chapter; }
[layer]             { @extend .grid-layer; }
[overmain]          { @extend .grid-overmain; }



.grid-overmain {
    background-color: $colorShy;
}



[half-left] { grid-column: main-start / midpoint; }
[half-right] { grid-column: midpoint / main-end; }
[halfscreen] { grid-column: full-start / midpoint; }
[halfscreen-right] { grid-column: midpoint / full-end; }
[aside] { grid-column: aside; }
[aside-screen] { grid-column: aside-start / full-end; }
[menu] { grid-column: menu; }
[menu-screen] { grid-column: full-start / menu-end; }
[merge] { grid-column: menu-start / aside-end; }


.box {
    padding-top:    1*$Hdim;
    padding-bottom: 1*$Hdim;
    background-color: firebrick;
    color: white;
}
[box] { @extend .box; }