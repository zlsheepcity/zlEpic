<!doctype html>
<meta charset="utf-8" mapuping="ы">
<title>SRC: Payment</title>




<h1>Payment</h1>
— одна финансовая транзакция и ее история
<br><br><br>

Делятся на:<br>
1. оплаченные платежи (confirmed)<br>
2. неплаченные платежи (waiting)<br>
3. отброшенные платежи (canceled)<br>
<br><br>

В пользу компании платежи положительные, наоборот — отрицательные. Сумма оплаченных и неоплаченных платежей называется ожидаемым и реальным профитом компании<br>
<br>

<h2>У всех платежей</h2>

<ul>
  <li>направление «клиент→компания», «компания→клиент», «компания→писатель», <b>непредсказуемые сторонние участники</b>
  <li>участники
  <li>сумма оплаты в USD
  <li>«список покупок» внутри платежа
  <li>список скидок/накидок внутри платежа
  <li>параметры для банковской транзакции
  <li>ответы банка
  <li>заголовок для оператора (заголовок+подзаголовок)
  <li>события
    <ul>
      <li>  рождение платежа (драфт) — как только возникла необходимость
      <li>  создание платежа — завершение процедуры оформления + доставка всем участникам<br>
      <li>  оплата платежа — банковское подтверждение
      <li>  внешние события — автоматически инициируются банками
      <li>  игнорирование платежа — оператором вручную, с указанием причины
    </ul>
  <li>у каждого события фиксируется дата и состояние на момент события   
</ul>
<br><br>


<h2>Классический набор платежей</h2>

<ul>
  <li> <b>Первичный сабмит</b> — создается автоматически на продуктовом сайте
  <li> <b>Ресабмит</b> — создается автоматически на продуктовом сайте 
  <li> <b>Дополнительные</b> — проданные VAS или полная импровизация от оператора, требует ручного подтверждения
  <li> <b>Оплата писателю</b> — драфт создается автоматически, требует ручного подтверждения
  <li> <b>Неведомая беда</b> — сhargeback, происки банков и др. Неведомая беда имеет два статуса:
      <ul>
        <li> непонятно что это такое
        <li> разобрались и смирились
      </ul>
</ul>


<br><br>

<h2>Создание дополнительного платежа</h2>
В драфт дополнительного платежа в качестве «товаров» автоматически попадают:
<ul>
  <li> проданные VAS
</ul>

Драфт можно дополнить вручную (добавить «товар»)<br><br>

Драфт можно оформить в полноценный платеж. После чего появляется новый пустой драфт для дополнительного платежа.
<br><br>

<h3>Добавить «товар» к драфту</h3>
<ul>
  <li> Оператор указывает любую цену (в том числе и отрицательную)
  <li> Оператор пишет официальное название «товара»
  <li> В одном платеже негораниченное количество «товаров»
</ul>

<br><br>

<h2>Известные вопросы</h2>

<ol>
  <li> Как решается конфликт между первичным сабмитом и всеми последующими ресабмитами?
</ol>

